<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Prácticas del lenguaje</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: #fef6e4;
      text-align: center;
      padding: 20px;
    }
    img { width: 150px; margin: 10px; }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      background: #ffd6e0;
      cursor: pointer;
    }
    .btn-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .btn-grid button {
      width: 250px;
      margin: 10px;
    }
    .barra {
      width: 100%;
      background-color: #ddd;
      border-radius: 10px;
      margin: 10px 0;
    }
    .barra-interna {
      height: 20px;
      width: 0%;
      background-color: #ff8fab;
      border-radius: 10px;
      transition: width 0.5s ease;
    }
    .mensaje {
      font-weight: bold;
      font-size: 20px;
      margin: 10px;
      color: green;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>

<!-- PANTALLA INICIO -->
<section id="pantallaInicio">
  <h1>Peques, bienvenidas a Prácticas del lenguaje</h1>
  <div><img src="carpincho.png" alt="Carpincho"><img src="unicornio.png" alt="Unicornio"></div>
  <h2>¿Quién va a jugar?</h2>
  <input type="text" id="nombre" placeholder="Escribí tu nombre">
  <br><br>
  <button onclick="guardarNombre()">¡Empiezan a jugar!</button>
</section>

<!-- MENÚ PRINCIPAL -->
<section id="menuPrincipal" style="display:none;">
  <h1 id="saludo"></h1>
  <div class="btn-grid" id="botonesCategorias"></div>
  <br>
  <button onclick="mostrar('pantallaInicio')">Volver al inicio</button>
</section>

<!-- CONTENIDO DE CATEGORÍA -->
<section id="contenidoTema" style="display:none;">
  <h1 id="tituloCategoria"></h1>
  <p id="explicacionCategoria"></p>
  <div class="barra"><div id="barraNivel" class="barra-interna"></div></div>
  <p id="puntaje"></p>
  <p id="preguntaTexto"></p>
  <div id="opciones"></div>
  <p id="mensajeRespuesta" class="mensaje"></p>
  <button onclick="mostrar('menuPrincipal')">Volver</button>
</section>

<script>
let nombre = "", puntaje = 0, nivel = 1;
let actualCategoria = "", actualPregunta = {};
const bancos = {
  "Mayúsculas y minúsculas": [
    { texto: "¿Cuál está bien escrito?", opciones: ["juan", "Juan", "JUAN"], correcta: 1 },
    { texto: "¿Cuál está bien escrito?", opciones: ["pedro", "PEDRO", "Pedro"], correcta: 2 },
    { texto: "¿Cuál está bien escrito?", opciones: ["maría", "Maria", "María"], correcta: 2 },
    { texto: "¿Cuál está bien escrito?", opciones: ["LUIS", "Luis", "luis"], correcta: 1 },
    { texto: "¿Cuál está bien escrito?", opciones: ["ana", "ANA", "Ana"], correcta: 2 },
    // (Agregá 45 más aquí)
  ],
  "¿B o V?": [
    { texto: "¿Cómo se escribe correctamente?", opciones: ["baca", "vaca", "vaka"], correcta: 1 },
    { texto: "¿Cómo se escribe correctamente?", opciones: ["bello", "vello", "bello"], correcta: 0 },
    { texto: "¿Cómo se escribe correctamente?", opciones: ["bote", "vote", "voto"], correcta: 0 },
    { texto: "¿Cómo se escribe correctamente?", opciones: ["vien", "bien", "bjen"], correcta: 1 },
    { texto: "¿Cómo se escribe correctamente?", opciones: ["bida", "vida", "vda"], correcta: 1 },
    // (Agregá 45 más aquí)
  ],
  // Agregá aquí las demás categorías (con 50 preguntas únicas por cada una)
};

const explicaciones = {
  "Mayúsculas y minúsculas": "Las mayúsculas se usan para comenzar nombres propios y al inicio de una oración.",
  "¿B o V?": "Algunas palabras llevan B, otras V. ¡Aprendamos cuál va!",
  // (Completá con todas las explicaciones)
};

function mostrar(id) {
  document.querySelectorAll("section").forEach(sec => sec.style.display = "none");
  document.getElementById(id).style.display = "block";
}

function guardarNombre() {
  const input = document.getElementById("nombre");
  nombre = input.value.trim();
  if (!nombre) {
    alert("Por favor, escribí tu nombre.");
    return;
  }
  localStorage.setItem("peques_nombre", nombre);
  document.getElementById("saludo").innerText = `Hola, ${nombre}. ¿Qué querés practicar hoy?`;
  mostrar("menuPrincipal");
}

function iniciarCategoria(categoria) {
  actualCategoria = categoria;
  document.getElementById("tituloCategoria").innerText = categoria;
  document.getElementById("explicacionCategoria").innerText = explicaciones[categoria] || "";
  document.getElementById("mensajeRespuesta").innerText = "";
  mostrar("contenidoTema");
  siguientePregunta();
}

function siguientePregunta() {
  const arr = bancos[actualCategoria];
  actualPregunta = arr[Math.floor(Math.random() * arr.length)];
  document.getElementById("preguntaTexto").innerText = actualPregunta.texto;
  document.getElementById("opciones").innerHTML = "";
  actualPregunta.opciones.forEach((op, i) => {
    const btn = document.createElement("button");
    btn.innerText = op;
    btn.onclick = () => verificarRespuesta(i);
    document.getElementById("opciones").appendChild(btn);
  });
  actualizarBarra();
  document.getElementById("puntaje").innerText = `Puntaje: ${puntaje} · Nivel: ${nivel}`;
}

function verificarRespuesta(indice) {
  const msg = document.getElementById("mensajeRespuesta");
  if (indice === actualPregunta.correcta) {
    puntaje++;
    msg.innerText = "¡Muy bien!";
    msg.className = "mensaje";
    if (puntaje % 10 === 0) nivel++;
    setTimeout(() => {
      msg.innerText = "";
      siguientePregunta();
    }, 1000);
  } else {
    msg.innerText = "Ups... Intentá de nuevo.";
    msg.className = "mensaje error";
  }
  actualizarBarra();
  document.getElementById("puntaje").innerText = `Puntaje: ${puntaje} · Nivel: ${nivel}`;
}

function actualizarBarra() {
  const barra = document.getElementById("barraNivel");
  const progreso = (puntaje % 10) * 10;
  barra.style.width = progreso + "%";
}

window.onload = () => {
  const guardado = localStorage.getItem("peques_nombre");
  if (guardado) {
    nombre = guardado;
    document.getElementById("saludo").innerText = `Hola, ${nombre}. ¿Qué querés practicar hoy?`;
    mostrar("menuPrincipal");
  }
  const botones = Object.keys(bancos).map(cat => {
    const btn = document.createElement("button");
    btn.innerText = cat;
    btn.onclick = () => iniciarCategoria(cat);
    return btn;
  });
  botones.forEach(b => document.getElementById("botonesCategorias").appendChild(b));
};
</script>
</body>
</html>